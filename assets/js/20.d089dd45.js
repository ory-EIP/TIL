(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{292:function(s,a,t){"use strict";t.r(a);var e=t(13),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"using-simplestoragesystem-s3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-simplestoragesystem-s3"}},[s._v("#")]),s._v(" Using SimpleStorageSystem(S3)")]),s._v(" "),a("h2",{attrs:{id:"bucket-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bucket-command"}},[s._v("#")]),s._v(" Bucket Command")]),s._v(" "),a("h3",{attrs:{id:"bucet-create"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bucet-create"}},[s._v("#")]),s._v(" Bucet Create")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 mb s3://버켓 네임\n\naws s3 mb s3://\n")])])]),a("h3",{attrs:{id:"bucket-list-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bucket-list-command"}},[s._v("#")]),s._v(" Bucket List Command")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n")])])]),a("h3",{attrs:{id:"bucket-remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bucket-remove"}},[s._v("#")]),s._v(" Bucket Remove")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 rb s3://버켓 네임\n")])])]),a("p",[s._v("만일 S3 버켓 안에 내용물이 비어 있지 않을 경우 버킷 제거가 되지 않는다.\n이럴 경우 "),a("code",[s._v("--force")]),s._v(" 옵션을 주면, S3 버켓 내의 모든 파일을 강제로 삭제하고 그 다음 S3 버켓을 제거하게 된다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 rb s3://버켓 네임 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--force")]),s._v("\n")])])]),a("h2",{attrs:{id:"bucket-file-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bucket-file-command"}},[s._v("#")]),s._v(" Bucket File command")]),s._v(" "),a("h3",{attrs:{id:"file-list-search"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-list-search"}},[s._v("#")]),s._v(" File list Search")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://버켓 네임\n")])])]),a("h3",{attrs:{id:"file-move"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-move"}},[s._v("#")]),s._v(" File move")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" test.tar s3://버켓 네임\n")])])]),a("h3",{attrs:{id:"file-remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-remove"}},[s._v("#")]),s._v(" File remove")]),s._v(" "),a("p",[s._v("버켓명/키명을 명시하여 삭제할 수 있다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://버켓 네임/삭제일 파일\n")])])]),a("h3",{attrs:{id:"file-move-local-to-s3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-move-local-to-s3"}},[s._v("#")]),s._v(" File move local to s3")]),s._v(" "),a("p",[s._v("로컬 파일을 S3 버켓에 복사하는 것은 곧 S3에 업로드하는 것")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓에 파일 업로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 테스트 파일 s3://버킷 네임\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓에 파일명을 변경하고 업로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 테스트 파일 s3://버켓 네임/저장할 파일 이름\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓의 folder안에 파일 업로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 테스트 파일 s3://버켓 네임/저장할 폴더/\n \n")])])]),a("h3",{attrs:{id:"file-move-s3-to-local"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-move-s3-to-local"}},[s._v("#")]),s._v(" File move s3 to local")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://버켓 네임/객체명 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("저장할 경로"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓의 파일을 로컬에 현재 디렉토리에 다운")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://버켓 네임/파일 ./\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓의 파일을 로컬에 다른 이름으로 변경하고 다운")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://버켓 네임/다운로드 받을 파일 ./변경하고 싶은 이름\n")])])]),a("h3",{attrs:{id:"file-move-s3-to-s3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-move-s3-to-s3"}},[s._v("#")]),s._v(" File move s3 to s3")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓의 파일을 다른 폴더에 복사")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://버켓 네임/이동할 파일 s3://버켓 네임/옮겨질 폴더이름/\n")])])]),a("h3",{attrs:{id:"directory-sync"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#directory-sync"}},[s._v("#")]),s._v(" Directory Sync")]),s._v(" "),a("p",[s._v("디렉토리에 있는 전체 파일을 옮길 때")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("동기화 주체"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("동기화 대상"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓의 내용물을 로컬 디렉토리와 동기화 -> 로컬로 다운로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" s3://버켓 네임/ ./\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 로컬 디렉토리의 내용물을 버킷에 동기화 -> s3에 업로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" ./ s3://버켓 네임\n")])])]),a("blockquote",[a("p",[s._v("다만 동기화는 파일을 업로드/다운로드 할때 동작되고, 파일 삭제 동작은 하지않는다. (빈 버킷과 동기화되도 내 로컬 파일들이 삭제되지 않는다)")])]),s._v(" "),a("h2",{attrs:{id:"s3-커맨드-옵션"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3-커맨드-옵션"}},[s._v("#")]),s._v(" S3 커맨드 옵션")]),s._v(" "),a("p",[s._v("자주 사용하는 cli 명령어 옵션은 --force 강제, --exclude 제외, --include 포함 등이 존재")]),s._v(" "),a("h3",{attrs:{id:"하위-디렉토리-포함-recursive"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#하위-디렉토리-포함-recursive"}},[s._v("#")]),s._v(" 하위 디렉토리 포함(--recursive)")]),s._v(" "),a("p",[s._v("--recursive 옵션과 함께 사용하면 커맨드 적용 범위가 하위 디렉토리까지 적용된다.")]),s._v(" "),a("p",[s._v("예를 들어\naws s3 rm 커맨드를 --recursive 옵션과 함께 사용하면 하위 디렉토리까지 적용되면서 모든 파일과 디렉토리가 삭제된다.\n반대로 aws s3 cp 커맨드를 --recursive 옵션과 함께 사용하면 Bucket에 있는 모든 파일이 복사된다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://버켓 네임 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--recursive")]),s._v("\n\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://버켓 네임 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--recursive")]),s._v("\n")])])]),a("blockquote",[a("p",[s._v("aws s3 sync 커맨드는 기본적으로 하위 디렉토리까지 모두 동기화해주기 때문에 별도로 --recursive 옵션이 적용이 안된다.")])]),s._v(" "),a("h3",{attrs:{id:"파일-제외-exclude"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#파일-제외-exclude"}},[s._v("#")]),s._v(" 파일 제외 (--exclude)")]),s._v(" "),a("p",[s._v("--exclude 옵션은 명령에서 객체만 제외하도록 규칙을 설정하고 옵션은 지정된 순서대로 적용된다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 모든 .csv 파일을 제외하고 나머지 파일을 복사")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://버켓 네임/path "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exlude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.txt"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# test1.txt, test2.txt 등을 제외하고 copy")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://버켓 네임/path "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exlude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.txt"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test*.txt"')]),s._v(" \n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 디렉토리 내 파일을 삭제하되 .csv 로 끝나는 파일은 남겨 두기 위해, --exclude 옵션으로 *.csv 패턴을 지정한다.")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--recursive")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.csv"')]),s._v(" s3://버켓 네임/폴더 이름/\n")])])]),a("blockquote",[a("p",[s._v("Information")]),s._v(" "),a("p",[a("strong",[s._v("S3 와일드카드 패턴")]),s._v("\n와일드 카드(wildcard character)는 컴퓨터에서 특정 명령어로 명령을 내릴 때, 여러 파일을 한꺼번에 지정할 목적으로 사용하는 기호를 가리킨다.\n주로 특정한 패턴이 있는 문자열 혹은 파일을 찾거나, 긴 이름을 생략할 때 쓰인다.")]),s._v(" "),a("p",[s._v("기본적으로 aws cli는 와일드 카드 패턴을 지원하지 않는다.\n예를 들어, "),a("code",[s._v("aws s3 rm test*")]),s._v(" 실행하면 test1, test2, test3 파일이 지워지지 않는게 아니라 test* 라는 파일이 지워지게 된다.")]),s._v(" "),a("p",[s._v('다만 --include 와 --exclude 옵션과 함께 사용하면 와일드 카드 패턴을 지원한다.\n--exclude 옵션에 할당한 문자열을 보면, "*.csv" 와 같이 와일드 카드 문자를 사용한 예이다.')])]),s._v(" "),a("h3",{attrs:{id:"파일-포함-include"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#파일-포함-include"}},[s._v("#")]),s._v(" 파일 포함(--include)")]),s._v(" "),a("p",[s._v("--include 옵션은 명령에 지정된 객체만 포함하도록 규칙을 설정하며 옵션을 지정된 순서대로 적용된다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 모든 .csv 형식의 파일을 포함하여 복사")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://버켓 네임/폴더 이름 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.csv"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 모든 .csv 형식의 파일을 포함, 그러나 test(특정이름)으로 시작하는 파일명은 제외, 하지만 test1.csv만은 제외하지 않고 포함해서 복사")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" s3://버켓 네임/폴더 이름 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.csv"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test*.csv"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1.csv"')]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# .log 파일만 제외한 모든 파일과 하위 디렉토리 파일이 로컬에 복사")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://버켓 네임/ ./ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--recursive")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.log"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 특정 날짜의 nginx 로그를 다운로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://버켓 네임/nginx/ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--recursive")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"access*2022-11-30*"')]),s._v("\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 'image-숫자' 로 시작되는 복수 파일만 업로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /Images s3://버켓 네임/폴더 이름/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--recursive")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exclude")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"image-*"')]),s._v("\n")])])]),a("h3",{attrs:{id:"커맨드-테스트-dryrun"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#커맨드-테스트-dryrun"}},[s._v("#")]),s._v(" 커맨드 테스트(--dryrun)")]),s._v(" "),a("p",[s._v("명령어 조합이 애매하여, 수행 결과 말고 동작만 확인 하고 싶을 때, --dryrun 옵션을 이용해 동작 수행만 실행할 수 있다.")]),s._v(" "),a("p",[s._v("실수로 파일을 삭제하는 것을 방지하기 위한 테스트 방법이다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 결과 출력 시, dryrun 임을 표시하여 실제로 수행되지 않았음을 알려준다.")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" s3://버켓 네임/폴더 이름/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dryrun")]),s._v("\n\n예시\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dryrun"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" delete: s3://버켓 네임/폴더 이름/\n")])])]),a("h2",{attrs:{id:"s3-권한-커맨드"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3-권한-커맨드"}},[s._v("#")]),s._v(" S3 권한 커맨드")]),s._v(" "),a("h3",{attrs:{id:"파일에-권한-주기-acl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#파일에-권한-주기-acl"}},[s._v("#")]),s._v(" 파일에 권한 주기(--acl)")]),s._v(" "),a("p",[s._v("S3는 ACL이라고 하는 미리 정의된 권한 부여 세트를 지원한다.")]),s._v(" "),a("p",[s._v("이는 객체에 권한을 설정할 수 있게 도와준다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sync")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("이전 s3버켓 주소"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("이전할 s3 버켓 주소"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--acl")]),s._v(" public-read\n")])])]),a("table",[a("thead",[a("tr",[a("th",[s._v("ACL 옵션")]),s._v(" "),a("th",[s._v("설명")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("private")]),s._v(" "),a("td",[s._v("아무도 액세스 할 수 없음(default")])]),s._v(" "),a("tr",[a("td",[s._v("public-read")]),s._v(" "),a("td",[s._v("READ 액세스")])]),s._v(" "),a("tr",[a("td",[s._v("public-read-write")]),s._v(" "),a("td",[s._v("READ, WRITE 액세스")])])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" test.copy s3://버켓 네임 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--acl")]),s._v(" public-read\n")])])]),a("p",[s._v("위와 같이 명령어를 사용할 경우 이전 주소에서 이후 주소로 복사를 하게되고 public-read 권한을 주게 된다.")]),s._v(" "),a("p",[s._v("객체 URL로 접속하면 권한 경고 없이 파일을 바로 확인할 수 있다.")]),s._v(" "),a("h3",{attrs:{id:"파일에-권한-주기-grants"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#파일에-권한-주기-grants"}},[s._v("#")]),s._v(" 파일에 권한 주기(--grants)")]),s._v(" "),a("p",[s._v("객체에 대한 권한을 부여한다.")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--grants")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Permission")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Generatee_Type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Grantee_ID\n")])])]),a("ul",[a("li",[s._v("Permission: 권한 지정(read, readacl, writeacl, full)")]),s._v(" "),a("li",[s._v("Grantee_Type: 피부여자를 식별하는 방법을 지정(uri, emailaddress, id)")]),s._v(" "),a("li",[s._v("Grantee_ID: Grantee_Type에 따라 피부여자를 지정 (uri, emailaddress, id)")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 모든 사람이 읽을 수 있게 권한을 부여하고 업로드")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" filename s3://버켓 네임/폴더 이름/파일 이름 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--grants")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("read")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("uri"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://acs.amazonaws.com/groups/global/AllUsers\n")])])]),a("h2",{attrs:{id:"s3-커맨드-응용"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3-커맨드-응용"}},[s._v("#")]),s._v(" S3 커맨드 응용")]),s._v(" "),a("h3",{attrs:{id:"s3-특정-파일-다운받기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3-특정-파일-다운받기"}},[s._v("#")]),s._v(" s3 특정 파일 다운받기")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버킷 목록을 가져와서 날짜별로 정렬 후 awk 명령어를 이용하여 첫번째 필드($1)이 yyyy-mm-dd 이상 일경우 그리고 네 번째 필드($4)가 공백이 아닌 경우 $4만 출력( 파일 명 출력)")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://bucket-name/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'$1 > "2021-01-20" && $4 > "" {print $4}\'')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    aws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s3://bucat-name/"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$f")]),s._v('"')]),s._v(" ./ "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 그리고 그 파일명으로 현재 디렉토리에 다운")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"s3-advaned-커맨드"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3-advaned-커맨드"}},[s._v("#")]),s._v(" S3 advaned 커맨드")]),s._v(" "),a("h3",{attrs:{id:"aws-s3-vs-aws-s3api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-s3-vs-aws-s3api"}},[s._v("#")]),s._v(" aws s3 vs aws s3api")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("aws s3")]),s._v(" "),a("th",[s._v("aws s3api")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("커맨드를 통해 Aws s3를 파일 시스템처럼 접근할 수 있다.")]),s._v(" "),a("td",[s._v("커맨드를 통해서 Restful API 처럼 버킷에 접근 가능")])])])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# aws s3 명령어")]),s._v("\naws s3 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://버켓 네임/폴더 이름/\n")])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# aws s3api 명령어")]),s._v("\naws s3api list-objects-v2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--bucket")]),s._v(" 버켓 네임 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-prefix")]),s._v(" 폴더 이름\n")])])]),a("h3",{attrs:{id:"s3api-커맨드"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3api-커맨드"}},[s._v("#")]),s._v(" s3api 커맨드")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 버켓 생성하기")]),s._v("\naws s3api create-bucket "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--bucket")]),s._v(" \n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);